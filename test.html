<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>leaflet</title>
  <link rel="stylesheet" href="./css/normalize.css" />
  <link rel="stylesheet" href="./leaflet/leaflet.css" />
  <link rel="stylesheet" href="./css/plane.css" />
  <style>
    #mapDiv {
      height: 100vh;
    }

    .incident {
      fill: #323c48;
    }

    .hover {
      fill: #1d242f;
    }

    #plane {
      pointer-events:visiblePainted;
      cursor: not-allowed;
    }
    #plane path {
      pointer-events:visiblePainted;
      cursor: not-allowed;
    }
  </style>
</head>

<body>
  <div id="mapDiv"></div>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="./js/topojson.js" charset="utf-8"></script>
  <script src="./leaflet/leaflet.js" charset="utf-8"></script>
  <script src="./js/victor.min.js" charset="utf-8"></script>
  <script src="./js/flight.js" charset="utf-8"></script>
  <script>
    var style = {
      color: "#586a77",
      opacity: 1,
      weight: 1.5,
      fillColor: "#323c48",
      fillOpacity: .8
    }
    var mymap = L.map("mapDiv", {
      center: [33.027088, 109.467773],
      zoom: 4,
      zoomControl: false,
      attributionControl: false,
      minZoom: 1,
      maxZoom: 18
    })

    // 用d3读取地图geojson数据
    d3.json("data/geojson/world.json")
      .then((data) => {
        L.geoJSON(data, {
          style: style
        }).addTo(mymap);
        var svg = d3.select("#mapDiv").select("svg");

        var d_plane =
          "M59.79,12.92C62.42,9.4,64,5.75,64,3.15a3.62,3.62,0,0,0-.49-2,1.6,1.6,0,0,0-.29-.37,1.68,1.68,0,0,0-.34-.27,3.56,3.56,0,0,0-2-.51c-2.6,0-6.25,1.58-9.77,4.21-2.84,2.13-5.69,5.12-9.62,9.27L39.34,15.7l-7.62-2.28,0,0a1.71,1.71,0,0,0,0-2.41L30.36,9.61a1.71,1.71,0,0,0-1.21-.5,1.68,1.68,0,0,0-1.21.5l-2.06,2.06-1.09-.33a1.71,1.71,0,0,0-.14-2.25L23.27,7.7a1.71,1.71,0,0,0-1.21-.5,1.67,1.67,0,0,0-1.2.5L19,9.59,11.21,7.27a1.94,1.94,0,0,0-.55-.08,2.05,2.05,0,0,0-1.43.58L6.5,10.5A1.61,1.61,0,0,0,6,11.62,1.56,1.56,0,0,0,6.85,13l16.3,9.11a2.84,2.84,0,0,1,.4.3l4.65,4.65C23.85,31.66,20,36.09,17,40L16.15,41,3.54,39.86H3.32a2.33,2.33,0,0,0-1.56.65L.49,41.76A1.58,1.58,0,0,0,0,42.89a1.55,1.55,0,0,0,.92,1.43l8.87,4.21a2.07,2.07,0,0,1,.34.24l.74.73a5.38,5.38,0,0,0-.35,1.71,2.24,2.24,0,0,0,.62,1.63l0,0h0a2.25,2.25,0,0,0,1.63.61,5.43,5.43,0,0,0,1.69-.35l.75.75a2,2,0,0,1,.23.33l4.2,8.85a1.57,1.57,0,0,0,1.41.93h0a1.58,1.58,0,0,0,1.12-.47l1.3-1.31a2.32,2.32,0,0,0,.62-1.56c0-.07,0-.13,0-.16L23,47.85,24,47c3.86-3,8.3-6.9,12.87-11.24l4.65,4.66a2.49,2.49,0,0,1,.3.4L51,57.13a1.58,1.58,0,0,0,2.54.37l2.74-2.74a2.08,2.08,0,0,0,.56-1.43,2,2,0,0,0-.07-.54L54.41,45l1.89-1.89a1.71,1.71,0,0,0,0-2.41l-1.39-1.38a1.71,1.71,0,0,0-2.25-.14l-.32-1.09,2.06-2.06a1.72,1.72,0,0,0,.5-1.21,1.69,1.69,0,0,0-.5-1.2L53,32.27a1.71,1.71,0,0,0-2.42,0h0L48.3,24.65l2.25-2.14C54.68,18.59,57.67,15.76,59.79,12.92Z"

        var plane = svg.append("g").attr("id", "plane").attr("fill", "#108ee9").attr("stroke-width", 1).attr('height',
          10).attr('width', 10)

        plane.append("path").attr("d", d_plane)

        function mouseOver(d) {
          console.log("mouseOver");
        }

        function mouseOut() {
          console.log("mouseOut");
        }

        d3.select("#plane").on("mouseover", mouseOver).on("mouseout", mouseOut);
      })
  </script>

</body>

</html>